<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>signIn</title>
    <script src="./common/flexible_css.debug.js " type="text/javascript "></script>
    <link rel="stylesheet" href="./css/signIn.css" type=" text/css ">
    <script src="./common/flexible.debug.js " type="text/javascript "></script>
</head>

<body>
    <div class="ui-personal-header ">
        <h4>
            <a href=" ">
                <img src="./images/back_arrow.png " alt=" ">
            </a> 个人中心 </h4>
        <div class="ui-signIn-btn" id="punch_card">
            <p class="ui-signIn-title">未签到</p>
            <p class="ui-signIn-p">点击签到</p>
        </div>

        <div class="ui-signIn-timeline">
            <!-- <span class="ui-signIn-day first">
                8.01
            </span>
            <span class="ui-signIn-day">
                8.02
            </span>
            <span class="ui-signIn-day">
                8.03
            </span>
            <span class="ui-signIn-day">
                8.04
            </span>
            <span class="ui-signIn-day">
                8.05
            </span>
            <span class="ui-signIn-day">
                8.06
            </span>
            <span class="ui-signIn-day last">
                8.07
            </span> -->
        </div>
    </div>
    <div class="ui-signIn-content">
        <h4>
            签到记录
        </h4>
        <ul class="ui-signIn-list">
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
            <li>2018-08-05 09:10:45 <span class="ui-signIn-fen">+30</span></li>
        </ul>
        <a href="" class="ui-signIn-more"> 点击查看更多</a>
    </div>
    <script src="./common/jquery-1.11.0.js"></script>
    <script>
        var currentday = [];
        $("#punch_card").on("click", function() {
            if (currentday[currentday.length - 1] == Number($(".currentSecond").html().substring(0, $(".currentSecond").html().indexOf("<")))) {} else {
                currentday.push($(".currentSecond").html().substring(0, $(".currentSecond").html().indexOf("<")));
                var width = $(window).width(),
                    height = $(window).height();
                var $div = $("<div class='shade'></div>")
                $div.append($(
                    // '<div class="ui-condition-tips">' +
                    // '<h6>已签到</h6>' +
                    // '<p>10</p>' +
                    // '<div class="ui-tips-btn">' +
                    // '已领取10点积分' +
                    // '</div>' +
                    // '<div class=ui-jifenclose>' +
                    // '<a id="ui_off"></a>' +
                    // '</div>' +
                    // '</div>'

                    ' <div class = "ui-condition-tips" > ' +
                    ' <h6> 签到领积分 </h6>' +
                    ' <p> 10 </p>' +
                    ' <div class = "ui-tips-btn"> ' +
                    '恭喜领取10点积分' +
                    '</div>' +
                    '<div class=ui-jifenclose><a id="ui_off"></a></div>' +
                    '</div>'
                ));
                $div.width(width);
                $div.height(height);
                $('body').append($div);
                $('html').css('overflow', 'hidden'); //浮层出现时窗口不能滚动设置
                $(this).find(".ui-signIn-title").text("已签到")
            }
        })
        $("body").on("click", "#ui_off", function() {
            // console.log(2)
            $(".shade").hide()
            $('html').css('overflow', 'auto')
        })
    </script>
    <script>
        var data = new Date()
        var month = data.getMonth() + 1;
        // var day = data.getDate() - ;
        // 3天的毫秒数259200000 前三天等于当前的毫秒数减去3天的毫秒数 后三天等于当前的毫秒数加上3天的毫秒数
        // 将得到的毫秒数转化成日期即可。
        // 获取当前的毫秒数
        // 一天的毫秒数
        var second = 86400000;
        // 当前
        var currentSecond = data.getTime();
        // 昨天
        var yesterday = currentSecond - second;
        // 前天
        var beforeYesterday = currentSecond - second * 2;
        // 大前天
        var threeDaysAgo = currentSecond - second * 3;
        // 明天
        var tomorrow = currentSecond + second;
        // 后天 
        var afterTomorrow = currentSecond + second * 2;
        //大后天
        var inThreeDays = currentSecond + second * 3;
        // var lastThreeSecond = currentSecond - 259200000;
        // var nextThreeSecond = currentSecond + 259200000;
        // console.log(currentSecond);
        // console.log(lastThreeSecond);
        // console.log(nextThreeSecond);
        // console.log(month);
        // 将毫秒转化成日期
        function getdate(crn) {
            var oDate = new Date(crn);
            var month = oDate.getMonth() + 1;
            var day = oDate.getDate();
            oTime = month + "." + day;
            return oTime;
        }

        function weeks(week) {
            var date = new Date(week)
            var tt = date.getDay();
            console.log(tt)
            switch (tt) {
                case 1:
                    return x = "星期一"
                    break;
                case 2:
                    return x = "星期二"
                    break;
                case 3:
                    return x = "星期三"
                    break;
                case 4:
                    return x = "星期四"
                    break;
                case 5:
                    return x = "星期五"
                    break;
                case 6:
                    return x = "星期六"
                    break;
                case 0:
                    return x = "星期日"
                    break;
                default:
                    break;
            }
        }
        var curent = getdate(currentSecond)
        var cs = getdate(yesterday);
        $(".ui-signIn-timeline").append(
                '<span class="ui-signIn-day first">' +
                getdate(threeDaysAgo) +
                ' <span>' + weeks(threeDaysAgo) + '</span>' +
                '</span>' +
                '<span class="ui-signIn-day">' +
                getdate(beforeYesterday) +
                ' <span>' + weeks(beforeYesterday) + ' </span>' +
                '</span>' +
                '<span class="ui-signIn-day">' +
                getdate(yesterday) +
                ' <span> ' + weeks(yesterday) + ' </span>' +
                '</span>' +
                ' <span class = "ui-signIn-day currentSecond" > ' +
                getdate(currentSecond) +
                ' <span> ' + weeks(currentSecond) + ' </span>' +
                '</span>' +
                '<span class="ui-signIn-day">' +
                getdate(tomorrow) +
                ' <span> ' + weeks(tomorrow) + ' </span>' +
                '</span>' +
                '<span class="ui-signIn-day">' +
                getdate(afterTomorrow) +
                ' <span> ' + weeks(afterTomorrow) + ' </span>' +
                '</span>' +
                '<span class="ui-signIn-day last">' +
                getdate(inThreeDays) +
                ' <span> ' + weeks(inThreeDays) + ' </span>' +
                '</span>'
            )
            // 当天的积分数
        $(".currentSecond").append("<span class='today'>10</span>")
    </script>
</body>

</html>